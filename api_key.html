<!DOCTYPE html>
<html lang="en">
    <head>
    <script>
        async function saveApiKey() {
            const apiKey = document.getElementById("api-key-input").value;
            if (!apiKey) {
                alert("Please enter a valid API key.");
                return;
            }

            try {
                await window.__TAURI__.core.invoke("save_api_key", { key: apiKey }); // ✅ Using window.__TAURI__
                alert("API Key saved!");
                await window.__TAURI__.window.getCurrent().close();  // ✅ Close the window
            } catch (error) {
                console.error("Failed to save API key:", error);
                alert("Error saving API key.");
            }
        }

        async function closeWindow() {
            await window.__TAURI__.window.appWindow.close(); // ✅ Close the window manually
        }
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: white;
            border-radius: 10px;
            padding: 20px;
            width: 300px;
        }
        #close-button {
            position: absolute;
            top: 5px;
            right: 10px;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 20px;
        }
    </style>
</head>

<body>
    <p class="font-['ESKlarheitKurrentMono'] mx-auto p-4 border-2 border-gray-100 mb-10">Enter Your OpenAI API Key</p>
    <input class="mx-auto font-['ESKlarheitKurrentMono'] mb-10" type="text" id="api-key-input" placeholder="OpenAI API Key">
    <button onclick="saveApiKey()">Save</button>
</body>
</html>
